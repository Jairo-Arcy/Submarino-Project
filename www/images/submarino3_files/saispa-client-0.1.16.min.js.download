!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,n=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(o=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(1));var i=function(){var e;if(-1!==window.top.location.href.indexOf("log=true")){for(var t=new Date(Date().toLocaleString()).toISOString().replace("T"," ").replace("Z","").split(" "),r=n(t,2)[1],o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];(e=console).log.apply(e,["["+r+"][saispa-client]: "].concat(a))}};t.LogError=function(e,t){i("*ERROR*",e,t);try{var r=function(e){return JSON.stringify({id:""+(new Date).getTime()+Math.ceil(9999*Math.random()),brand:"suba",data:o({},e,{userAgent:navigator.userAgent,url:window.top.location.href})})}({message:t,origin:e,type:"ERROR"});(0,a.default)({details:{url:"https://saika-v3.b2w.io/event/saispa/collect",body:r}})}catch(e){i("*ERROR* can't send error",e.message)}},t.Log=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.default=function(e){try{var t=e.details,r=t.url,n=t.body;if("sendBeacon"in navigator)return navigator.sendBeacon(r,n),void(0,o.Log)("beacon has sent.");var a=new XMLHttpRequest;a.open("POST",r),a.setRequestHeader("Content-Type","application/json"),a.send(n),(0,o.Log)("xhr has sent.")}catch(e){(0,o.LogError)("dispatchBeacon",e)}}},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";var o=r(0),n=u(r(1)),a=u(r(4)),i=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}var c=void 0,l=!1,s=[],f=function(e){try{var t=e.data,r=void 0===t?{}:t;return(0,o.Log)("<from: worker>",r),"beacon"===r.type?(0,n.default)(r):"script"===r.type?(0,a.default)()(r):(0,o.Log)(r)}catch(e){(0,o.LogError)("track",e.message)}},d=function(e){try{c.postMessage({type:e.type,payload:{detail:e.detail}}),(0,o.Log)(e.type,"has sent to worker.")}catch(e){(0,o.LogError)("sendEvent",e.message)}},p=function(e){if(!c)return s.push(e);"page:load"!==e.type?d(e):l||(l=!0,d(e))},g=function(){s.forEach(d),c&&(c.onmessage=f)};!function(){try{(0,o.Log)("registering listeners..."),["page:load"].forEach(function(e){document.addEventListener(e,p),(0,o.Log)(e+" registered.")}),function(e,t){try{if(!window.Worker)return(0,o.LogError)("Navigator hasn't Worker.");c=(0,i.default)(e),t&&t(c)}catch(e){(0,o.LogError)("loadWorker",e.message)}}("https://statics-submarino.b2w.io/saispa/worker/saispa-worker-0.0.12.js",g),function e(){if(!l){if("undefined"==typeof cage_global_variable)return setTimeout(e,250);(0,o.Log)("page:load already triggered, fallback with cage_global_variable"),p(cage_global_variable)}}()}catch(e){(0,o.LogError)("start",e.message)}}()},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.default=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(a){try{var i=e.top,u=void 0===i.saispa||"function"!=typeof i.saispa.track;if(u&&r<=0)return(0,o.Log)("cannot find saispa-tracker");if(u&&r>0)return setTimeout(function(){return t(r-1,n)(a)},n);(0,o.Log)("dispatching track..."),saispa.track(a),(0,o.Log)(a.event+" tracked with saispa-tracker")}catch(e){(0,o.Log)("dispatchTrack error",e)}}}}).call(this,r(5))},function(e,t,r){"use strict";var o,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(o=window)}e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(r(7));t.default=function(e){try{var t=(0,n.default)(e),r=new Worker(t);return(0,o.Log)("Worker successfully created."),r}catch(e){(0,o.LogError)("createWorker","Cannot create worker from blob file.")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(r(8));t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/javascript",r="importScripts('"+e+"')",a=void 0;try{a=new Blob([r],{type:t}),(0,o.Log)("Blob created from default constructor")}catch(e){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);i.append(r),a=i.getBlob(t),(0,o.Log)("Blob created from blobBuilder")}return(0,n.default)(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.default=function(e){try{return(window.URL||window.webkitURL).createObjectURL(e)}catch(t){return(0,o.LogError)("createObjectURL","cannot create object URL from: "+e),null}}}]);
//# sourceMappingURL=saispa-client-0.1.16.min.js.map