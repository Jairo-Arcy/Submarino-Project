!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(e,n){!function(){function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(e){switch(e.arrayFormat){case"index":return function(t,n,o){return null===n?[c(t,e),"[",o,"]"].join(""):[c(t,e),"[",c(o,e),"]=",c(n,e)].join("")};case"bracket":return function(t,n){return null===n?c(t,e):[c(t,e),"[]=",c(n,e)].join("")};default:return function(t,n){return null===n?c(t,e):[c(t,e),"=",c(n,e)].join("")}}}function i(e){var t;switch(e.arrayFormat){case"index":return function(e,n,o){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(o[e]=n);void 0===o[e]&&(o[e]={}),o[e][t[1]]=n};case"bracket":return function(e,n,o){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===o[e]?void(o[e]=[n]):void(o[e]=[].concat(o[e],n)):void(o[e]=n)};default:return function(e,t,n){if(void 0===n[e])return void(n[e]=t);n[e]=[].concat(n[e],t)}}}function c(e,t){return t.encode?t.strict?u(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"==typeof e?a(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var u=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=o(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var a in n)d.call(n,a)&&(i[a]=n[a]);if(s){r=s(n);for(var u=0;u<r.length;u++)l.call(n,r[u])&&(i[r[u]]=n[r[u]])}}return i},f={extract:function(e){return e.split("?")[1]||""},parse:function(e,t){var n=i(t=p({arrayFormat:"none"},t)),o=Object.create(null);return"string"!=typeof e?o:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(r),i,o)}),Object.keys(o).sort().reduce(function(e,t){var n=o[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=a(n):e[t]=n,e},Object.create(null))):o},stringify:function(e,t){var n=r(t=p({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map(function(o){var r=e[o];if(void 0===r)return"";if(null===r)return c(o,t);if(Array.isArray(r)){var i=[];return r.slice().forEach(function(e){void 0!==e&&i.push(n(o,e,i.length))}),i.join("&")}return c(o,t)+"="+c(r,t)}).filter(function(e){return e.length>0}).join("&"):""}},m=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={setBasePathEncodedItem:function(e,t){window&&window.location&&window.location.hostname&&this.setItem(e,t,window.location.hostname.substring(window.location.hostname.indexOf(".")))},getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,n,o,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(o)switch(o.constructor){case Number:c=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:c="; expires="+o;break;case Date:c="; expires="+o.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+c+(n?"; domain="+n:"")+(r?"; path="+r:"")+(i?"; secure":""),!0},removeItem:function(e,t,n){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,n=0;n<t;n++)e[n]=decodeURIComponent(e[n]);return e}};t.default=n});e(m);var v=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return btoa(JSON.stringify(e))}function r(e){return JSON.parse(atob(e))}function i(){return d(),c()}function c(){var e=v.default.getItem(w);return e&&"string"==typeof e?r(e):e&&"object"===(void 0===e?"undefined":l(e))?e:{}}function a(){var e=i();if(e){var t={};return Object.keys(e).map(function(n,o){t["c_"+n]=e[n]}),p.default.stringify(t)}}function u(e){var t=c();return e&&"object"===(void 0===e?"undefined":l(e))&&(Object.keys(e).forEach(function(n){var o=e[n];o&&(t[n]=o)}),v.default.setBasePathEncodedItem(w,o(t))),t}function s(e,t){var n=c();return e&&"string"==typeof e&&t&&n&&"object"===(void 0===n?"undefined":l(n))&&(n[e]=t,v.default.setBasePathEncodedItem(w,o(n))),n}function d(){var e={b2wSid:v.default.getItem("B2W-SID"),b2wUid:v.default.getItem("B2W-UID"),b2wPid:v.default.getItem("B2W-PID"),b2wOpn:v.default.getItem("b2wOpn"),b2wDeviceType:v.default.getItem("b2wDeviceType"),b2wChannel:v.default.getItem("b2wChannel"),b2wEPar:v.default.getItem("b2wEPar"),customerId:v.default.getItem("customer.id"),salesSolution:v.default.getItem("salesSolution")};return u(e),e}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.read=i,t.toQueryString=a,t.writeJson=u,t.write=s,t.seed=d;var p=n(f),v=n(m),w="context"});e(v);var w=v.toQueryString,b=function(){var e=window.top.location.search.replace("?","").split("&").indexOf("log=true"),t=!!window&&!!window.top&&!!window.top.localStorage&&window.top.localStorage.getItem("saika-log");return-1!==e||t&&""!==t},g=function(e){return b()&&!!console&&"function"==typeof console.info&&console.info(e)},y=function(e){var t=e.eventName,n=e.status,o=(e.data,e.dispatchApi);return g("[SaikaClient] - Dispatch API :: "+o+" - Dispatch Event :: "+t+" :: "+n+" :: ")},h=function(e,t,n){var o,r=w();if(o=n?"https://saika-v3.b2w.io/event/"+n+"/"+t+(""!==r?"?"+r:""):"https://saika-v2.b2w.io/event/"+t+(""!==r?"?"+r:""),window.navigator.sendBeacon){var i=navigator.sendBeacon(o,e.body);return void y({eventName:t,status:i?"success":"error",data:e.body,dispatchApi:"sendBeacon"})}if(!navigator.sendBeacon&&window.fetch)return void fetch(o,e,t).then(function(n){return y({eventName:t,status:"success",data:e.body,dispatchApi:"fetch"})}).catch(function(n){return y({eventName:t,status:"error",data:e.body,dispatchApi:"fetch"})});if(!navigator.sendBeacon&&!window.fetch){var c=new XMLHttpRequest,a=void 0;return c.open("POST",o),c.setRequestHeader("Content-Type","application/json"),a=c.send(e.body),void y({eventName:t,status:a?"success":"error",data:e.body,dispatchApi:"XMLHttpRequest"})}},I=function(e){return/(americanas.com.br)$/.test(e)?"acom":/(submarino.com.br)$/.test(e)?"suba":/(shoptime.com.br)$/.test(e)?"shop":/(soubarato.com.br)$/.test(e)?"soub":null}(function(){try{return window.top.location.origin}catch(e){return document.referrer}}())||"acom",j=function(){return(Math.floor(1e4*Math.random()+1)+Math.floor(100*Math.random()+1)+(new Date).getTime()).toString()},k=function(e){if(!e)return null;var t=e.source,n=e.eventName,o=e.eventNameSpace,r=e.id,i=e.body,c=e.references;if(!(!o||n&&I))return null;if(!(o||t&&n&&I))return null;var a={method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r&&null!==r&&void 0!==r?r.toString():j(),brand:I,source:t,data:i||{},references:c||{}})};return h(a,n,o)};t.saikaClient=k}()}()});!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(e);var t=e.saikaClient,n=function(e,t,n){function o(){var s=Date.now()-a;s<t&&s>=0?r=setTimeout(o,t-s):(r=null,n||(u=e.apply(c,i),c=i=null))}var r,i,c,a,u;null==t&&(t=100);var s=function(){c=this,i=arguments,a=Date.now();var s=n&&!r;return r||(r=setTimeout(o,t)),s&&(u=e.apply(c,i),c=i=null),u};return s.clear=function(){r&&(clearTimeout(r),r=null)},s.flush=function(){r&&(u=e.apply(c,i),c=i=null,clearTimeout(r),r=null)},s},o=function(e){return/(americanas.com.br)$/.test(e)?"acom":/(submarino.com.br)$/.test(e)?"suba":/(shoptime.com.br)$/.test(e)?"shop":/(soubarato.com.br)$/.test(e)?"soub":null},r=function(e,t){var n=t.component,o=t.position,r=t.segments,i=t.target,c=t.navigation,a=t.origin,u=t.page,s=t.product?{id:t.product.id,index:parseInt(t.product.index)}:void 0,d=c&&c.location&&c.location.query&&c.location.query.conteudo,l=d?{conteudo:d}:void 0,p=u&&u.breadCrumb,f=p?p[p.length-1]:"",m=void 0;return e&&"session-start"===e&&(navigator=window.top&&window.top.navigator?window.top.navigator:{},screen=window.top&&window.top.screen?window.top.screen:{},m={platform:navigator.platform||"",userAgent:navigator.userAgent||"",screen:{width:screen.width||0,height:screen.height||0}}),e&&"session-start"!==e&&(m={component:{position:n?n.position:o,target:i},product:s,query:l},n&&n.interactionTime&&(m.component.interactionTime=n.interactionTime),f&&f.type&&"category"===f.type&&(m.category=f.id),a&&t.product&&t.product.id&&delete m.component),m.segments=r,m},i=function(e){return e?decodeURIComponent(window.top.document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},c=function(e,t){return t?r(e,t):null},a=function(e,t){if(!t)return null;var n=t.component,o=t.context,r=t.publishesId,i=t.origin,c={};return o&&o.customerId&&(c.customerId=o.customerId),n&&n.publishesId&&(c.publishId=n.publishesId),r&&(c.publishId=r),i&&(c.origin=i),e?c:void 0},u=function(e){var t=e&&e.page&&e.page.type;return t?t+"-page":"spectre-collector"},s=function(e,n){n.segments=i("b2wcrmts");var r=o(window&&window.top&&window.top.location.origin),s={id:e&&"session-start"===e?n.detail:null,source:u(n),body:c(e,n),references:a(e,n),eventName:e};r&&"session-start"==e&&null==n.segments?interval=setInterval(function(){s.body.segments=i("b2wcrmts"),null!=s.body.segments&&(clearInterval(interval),t(s))},500):r&&t(s)},d=[],l=function(e){var t=e.detail;if(t&&t.position){var n=window.top.document.querySelectorAll("[data-tracker]"),o=Object.keys(n).filter(function(e){return n[e].dataset.tracker==="publishes-"+t.position.id})[0];o&&t.position&&(t.position.index=o),s("component-click",t)}t&&t.origin&&s("product-click",t)},p=function(e){var t=e.detail,n=window.top.document.querySelectorAll("[data-tracker]"),o=Object.keys(n).filter(function(e){return n[e].dataset.tracker==="publishes-"+t.position.id})[0];o&&t.position&&(t.position.index=o),s("component-click",t)},f=function(){d.length>0&&d.map(function(e){return v(e.eventDetail)})},m=function(e){var t=Date.now(),n=e.component.position.id,o=d.filter(function(e){return e.id===n});e.compoent&&e.compoent.interactionTime&&delete e.compoent.interactionTime,0===o.length&&(s("component-show",e),d.push({id:n,time:t,eventDetail:e}))},v=function(e){var t=e.component.position.id,n=void 0;d.forEach(function(e,o){e.id===t&&(n=o)}),n>=0&&(e.component.interactionTime=Date.now()-d[n].time,d.splice(n,1),s("component-interaction",e))},w=function(e){var t=window.top.innerHeight,n=parseFloat((e.offsetHeight/2).toFixed(0))+parseInt(e.getBoundingClientRect().top.toFixed(0));return n<=t&&n>0},b=function(e,t){w(e)&&m(t)},g=function(e,t){var o=n(function(){return w(e)?m(t):v(t)},100);window.top.addEventListener("scroll",o)},y=function(e){s("component-render",e)},h=function(e){s("session-start",e)},I=function(e){s("spectre-terms-click",e)},j=function(e,t){var n=t.component&&t.component.position&&t.component.position.id,o=n&&e?e+"-"+n:null;if(!o)return null;var r=window.top.document.querySelectorAll("[data-tracker]"),i=Object.keys(r).filter(function(e){return r[e].dataset.tracker===o})[0],c=i?r[i]:null;if(!c)return null;t.component&&t.component.position&&(t.component.position.index=i),g(c,t),b(c,t),y(t)};!function(){window.document.addEventListener("component:render",function(e){if(!e)return null;var t=e.detail.component.type;"publishes"===t&&j(t,e.detail)}),window.document.addEventListener("product:click",function(e){l(e)}),window.document.addEventListener("image:click",function(e){p(e)}),window.document.addEventListener("aggregation:category:click",function(){f()}),window.addEventListener("unload",function(){f()}),window.document.addEventListener("b2wsid:create",function(e){h(e)}),window.document.addEventListener("spectre:suggestions:click",function(e){I(e)})}(),window.document.dispatchEvent(new CustomEvent("cage:spectre-collector"))});
//# sourceMappingURL=bundle.js.map
